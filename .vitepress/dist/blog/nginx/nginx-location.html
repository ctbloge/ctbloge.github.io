<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>终于理解了Nginx配置中location规则的优先级问题 | 川塔文档</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.CwNnKCVM.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BoO6kStU.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.LynrPoBR.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CDhRSyRB.js">
    <link rel="modulepreload" href="/assets/blog_nginx_nginx-location.md.iNz6H8Qw.lean.js">
    <link rel="icon" href="/img/favicon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>川塔文档</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.ctbloge.top" target="_blank" rel="noreferrer" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>个人博客</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ctbloge/ctbloge.github.io" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ctbloge/ctbloge.github.io" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Nginx配置学习</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/blog/nginx/nginx-server.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Nginx配置中server模块的加载顺序和规则</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/blog/nginx/nginx-location.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>终于理解了Nginx配置中location规则的优先级问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _blog_nginx_nginx-location" data-v-e6f2a212><div><h1 id="终于理解了nginx配置中location规则的优先级问题" tabindex="-1">终于理解了Nginx配置中location规则的优先级问题 <a class="header-anchor" href="#终于理解了nginx配置中location规则的优先级问题" aria-label="Permalink to &quot;终于理解了Nginx配置中location规则的优先级问题&quot;">​</a></h1><p>这周在项目中遇到一个问题：由于我们前端打包的时候把静态文件的.map文件也上传到了生产环境中，导致这些.map文件可以被访问下载，因此被定性为“有源码泄露的安全风险问题”。因此，需要禁用这些.map文件的访问，于是决定用Nginx添加配置来禁用，但是设置过程中发现怎么都不生效，最后经过了我的各种查找和提问，终于搞清楚了Nginx的配置中location规则的生效规律，最终也解决了问题。</p><h2 id="问题背景" tabindex="-1">问题背景 <a class="header-anchor" href="#问题背景" aria-label="Permalink to &quot;问题背景&quot;">​</a></h2><h3 id="项目需求" tabindex="-1">项目需求 <a class="header-anchor" href="#项目需求" aria-label="Permalink to &quot;项目需求&quot;">​</a></h3><p>基于上面提到的问题，这里还有一个限制条件：我们的项目中有个很多Nginx配置，我不能修改默认的配置，只能在默认配置的一个拓展配置中添加新配置，来解决.map文件可访问问题。</p><p>我们的这个默认配置关键内容如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conf.d/console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.conf.custom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /itsc-mobile/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">			proxy_pass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://logic.itsc_mobile/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>其他内容就省略了，其实就是说我不能修改这个默认文件，但是可以增加一个<code>console*.conf.custom</code>文件来添加额外的配置。</p><p>我要做的就是让用户无法访问<code>/itsc-mobile/static/js/main.45d35777.js.map</code>这种地址，也就是以<code>.js.map</code>或者<code>.css.map</code>结尾的文件，但是不能影响正常的js和css的访问，比如<code>/itsc-mobile/static/js/main.45d35777.js</code>需要正常访问。</p><h3 id="我的做法" tabindex="-1">我的做法 <a class="header-anchor" href="#我的做法" aria-label="Permalink to &quot;我的做法&quot;">​</a></h3><p>我想到的方案是添加一个正则的规则，匹配<code>.js.map</code>或者<code>.css.map</code>结尾的文件就返回403，这样就可以阻止用户访问这种文件了。</p><p>于是我在额外配置文件console-ext.conf.custom中添加了如下规则：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 403</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>但是经过验证，发现这个规则根本就不生效，期初以为是我配置的位置不对，后面经过一番验证发现跟配置的位置没关系，就是正则不生效。</p><p>于是带着这个问题，我经过了一番搜索和求证，终于搞清楚了Nginx配置里面location的规则的生效规律。</p><h2 id="location的语法" tabindex="-1">location的语法 <a class="header-anchor" href="#location的语法" aria-label="Permalink to &quot;location的语法&quot;">​</a></h2><p>这里我根据网上搜到的一些文章，还有官方文档的介绍，自己理解后对location的的语法进行了总结。</p><p>这里只讨论下面这种由4个部分组成的语法, 这4个组成部分分别是: location关键字 + 匹配方式符号(可省略)+匹配规则+如何处理, 这个最复杂也是最常用, 我们只讨论这个。</p><p>格式大概是这样的：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ^~</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">~</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ~*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ] uri { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> }</span></span></code></pre></div><p>这里的匹配符号有5种：</p><ol><li>无符号：也就是匹配符号为空，算是一种前缀匹配，如 <code>location / {}</code></li><li><code>=</code>：表示精确匹配，如<code>location = /static/abc.png {}</code></li><li><code>^~</code>: 表示优先前缀匹配，如<code>location ^~ /static/js/ {}</code></li><li><code>~</code>: 表示区分大小写的正则匹配，如<code>location ~ /static/js/ {}</code></li><li><code>~*</code>: 表示不区分大小写的正则匹配，如<code>location ~* /static/js/ {}</code></li></ol><h2 id="location语法的优先级" tabindex="-1">location语法的优先级 <a class="header-anchor" href="#location语法的优先级" aria-label="Permalink to &quot;location语法的优先级&quot;">​</a></h2><p>我这里把这5种规则分成三类，分别是精确匹配、前缀匹配（无符号和优先前缀匹配），正则匹配。</p><h3 id="精确匹配" tabindex="-1">精确匹配 <a class="header-anchor" href="#精确匹配" aria-label="Permalink to &quot;精确匹配&quot;">​</a></h3><p>格式如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/abc.png</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 403</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>精确匹配是要求请求地址跟匹配项完全一致才算匹配成功，所以这种匹配是优先级最高的，只要匹配成功，就不会再进行其他规则的判断，直接返回。</p><h3 id="前缀匹配" tabindex="-1">前缀匹配 <a class="header-anchor" href="#前缀匹配" aria-label="Permalink to &quot;前缀匹配&quot;">​</a></h3><p>首先是无符号的前缀匹配：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/js/css/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 405</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/js/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 405</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>然后是有符号的前缀匹配，这种我称之为优先前缀匹配</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/js/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>这两个的优先级规律是：命中任何一个前缀匹配的话，还会继续往下去进行规则匹配，并且会从这两个规则中选择匹配到的最长的前缀作为结果，而如果长度相同，那么优先级前缀优先，此时直接返回优先前缀匹配，如果是无符号匹配的更长，则继续去匹配正则规则。</p><p>一个例子：<code>/static/js/css/abc</code> 这个地址同时被上面的两个前缀规则匹配，但是很明显无符号的规则可以匹配到<code>/static/js/css/</code>比有符号的匹配前缀<code>/static/js/</code> 长，所以会选择<code>/static/js/css/</code>最为临时返回规则，进一步去找正则规则。</p><p>而<code>/static/js/abc</code> 这个地址也同时被上面的规则匹配，但是两个都是匹配到<code>/static/js/</code>，长度一样，此时有符号的优先级就更高，并且不会继续找正则匹配，直接返回。</p><h3 id="正则匹配" tabindex="-1">正则匹配 <a class="header-anchor" href="#正则匹配" aria-label="Permalink to &quot;正则匹配&quot;">​</a></h3><p>格式如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 402</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>正则匹配的优先级相对比较低，从上面的前缀匹配也能看到，当无符号的前缀匹配到的情况下才会进行正则匹配，并且如果此时正则匹配到了，那么会取正则的结果，否则取无符号前缀匹配的结果</p><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><p>我经过咨询和学习，对location这里的规则进行了一个总结，并且画了一个流程图来体现：</p><p><img src="https://cdn.jsdelivr.net/gh/Hopetree/blog-img@main/2023/12/Nginx%E9%85%8D%E7%BD%AElocation%E8%A7%84%E5%88%99.png" alt=""></p><p>有如下结论：</p><ul><li>首先，不同规则在文件中的顺序对规则的匹配不受影响，只有同类型规则的顺序至上到下进行匹配时是先匹配先生效的</li><li>精确匹配优先级最高，只要匹配到就立即返回（最长匹配项），不会进行下一步匹配</li><li>前缀匹配中会取匹配到的最长前缀作为预选，当无符号的匹配最长时，还需要进行正则匹配，当优先前缀最长时，直接返回</li><li>“正则匹配的优先级很低”这个说法其实是不准确的，因为当匹配能到达正则匹配这里的时候，正则匹配的优先级就是最高的，只要匹配就返回，所以真正的问题是匹配会不会到正则匹配这里</li></ul><h2 id="一个典型案例" tabindex="-1">一个典型案例 <a class="header-anchor" href="#一个典型案例" aria-label="Permalink to &quot;一个典型案例&quot;">​</a></h2><p>在 Nginx 版本为1.20.1版本条件下，有如下配置文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    listen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12080</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    server_name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> abc.com</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    access_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /var/log/nginx/test.access.log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    error_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   /var/log/nginx/test.error.log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">png</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 402</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/js/css/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 405</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 401</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/js/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /static/abc.png</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 403</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>请写出下面的地址的返回码（可以在这个网站上面进行验证 <a href="https://nginx.viraptor.info/" target="_blank" rel="noreferrer">https://nginx.viraptor.info/</a>）：</p><p><code>/static/js/css/4.png</code> 这个地址会返回402，因为它同时被无符号前缀和有符号前缀匹配到，但是无符号前缀<code>/static/js/css/</code>更长，此时就继续进行正则匹配，发现可以被正则匹配到，所以返回了正则匹配的状态码402</p><p>匹配过程如下：</p><p><img src="https://cdn.jsdelivr.net/gh/Hopetree/blog-img@main/2023/12/Snipaste_2023-12-22_15-31-30%20%281%29.png" alt=""></p><p><code>/static/js/4.png</code>这个地址仅被两个优先前缀匹配，所以直接返回优先前缀匹配最长的<code>/static/js/</code>的404</p><p><code>/static/js/css6/4.png</code>这个地址同时被两个优先级前缀匹配，所以选择最长的返回404</p><p>匹配过程如下：</p><p><img src="https://cdn.jsdelivr.net/gh/Hopetree/blog-img@main/2023/12/Snipaste_2023-12-22_15-32-17%20%281%29.png" alt=""></p><p>这3个地址的匹配我最开始非常不理解，特别是第1个和第3个的对比，并且把这个疑惑发到了V站进行讨论，也正是这个<a href="https://www.v2ex.com/t/1002226#reply29" title="讨论" target="_blank" rel="noreferrer">讨论🔗</a>，让我理解了这里的规律。</p><h2 id="学以致用" tabindex="-1">学以致用 <a class="header-anchor" href="#学以致用" aria-label="Permalink to &quot;学以致用&quot;">​</a></h2><p>经过上面的学习，我知道了正则的规则生效的条件，所以我想到了解决项目上问题的方案，之前我配置的正则不生效是因为地址被优先前缀匹配到了，所以直接返回了，根本不会到正则判断这一步，所以为了使正则生效，我需要额外添加一个无符号前缀匹配才行，我的解决方案是这样的：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 403</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /itsc-mobile/static/js/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    proxy_pass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://logic.itsc_mobile/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>我在拓展文件中添加了两个规则，第一个规则自然是正则匹配了，第二个规则是一个无符号前缀匹配规则，这个规则需要比原本的优先级前缀匹配规则长，这样才能走到这里，进而走向正则匹配。</p><h2 id="总结-1" tabindex="-1">总结 <a class="header-anchor" href="#总结-1" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>其实在项目里面经常会遇到需要配置Nginx规则的事情，而我们项目里面配置文件又多，规则根本就理不清楚，所以之前配置的时候经常也是不停试探。经过了这次的学习，我总算是理清楚了location的规则，也经过了验证是理解正确的，后续再遇到Nginx配置规则不生效或者产出冲突，就可以按照这个思路去定位解决了。</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/blog/nginx/nginx-server.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>Nginx配置中server模块的加载顺序和规则</span><!--]--></a></div><div class="pager" data-v-1bcd8184><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog_django_asyncio-task.md\":\"BjVUj3au\",\"blog_django_blog-sync-to-vitepress.md\":\"BONLAEr5\",\"blog_django_django-celery-tasks.md\":\"CndKx28l\",\"blog_django_django-celery.md\":\"DhBwgXxd\",\"blog_django_echarts-for-web.md\":\"CaBKZ_pg\",\"blog_django_index.md\":\"BWwSznhL\",\"blog_django_python-markdown-extensions.md\":\"DCaQO3NT\",\"blog_django_run-celery-task-now.md\":\"m58U6vac\",\"blog_django_task-for-script.md\":\"DrFw_UH9\",\"blog_docker_ansible-and-docker.md\":\"DuJ5IkC2\",\"blog_docker_docker-image-for-django.md\":\"BoVli6bg\",\"blog_docker_dockerfile-multi-stage.md\":\"C1TUtMvo\",\"blog_docker_index.md\":\"e64ZBHh6\",\"blog_docker_install-docker.md\":\"DbKn5IvE\",\"blog_free_index.md\":\"Cl1yoFhq\",\"blog_git_git-commit.md\":\"CdxHTz6Z\",\"blog_git_git-note.md\":\"D-5KtFOZ\",\"blog_git_github-actions.md\":\"BTLZ_UBj\",\"blog_git_index.md\":\"DKU03HF0\",\"blog_git_install-gitea.md\":\"CfIJt4JL\",\"blog_linux_index.md\":\"BYZK6uPA\",\"blog_nginx_index.md\":\"_LkY0Nvh\",\"blog_nginx_nginx-location.md\":\"iNz6H8Qw\",\"blog_nginx_nginx-server.md\":\"Dv3ymfF3\",\"blog_personal-notes_index.md\":\"BOFpx5w-\",\"blog_python_appium-env.md\":\"DjbqN6MT\",\"blog_python_index.md\":\"DMaRQAo1\",\"blog_python_virtualenv-for-python.md\":\"CDfBlA3l\",\"blog_redis_index.md\":\"BQBEqS98\",\"blog_redis_redis-install-sentinel.md\":\"Bwj1_Ro-\",\"blog_redis_redis-install.md\":\"CKpCJruR\",\"index.md\":\"DPRYVxXg\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"川塔文档\",\"description\":\"A VitePress Site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"G6QEK9X4WI\",\"apiKey\":\"3be5076322e981f21c813f400e7c8ffd\",\"indexName\":\"hopetreeio\",\"locales\":{\"zh\":{\"placeholder\":\"搜索文档\",\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"searchBox\":{\"resetButtonTitle\":\"清除查询条件\",\"resetButtonAriaLabel\":\"清除查询条件\",\"cancelButtonText\":\"取消\",\"cancelButtonAriaLabel\":\"取消\"},\"startScreen\":{\"recentSearchesTitle\":\"搜索历史\",\"noRecentSearchesText\":\"没有搜索历史\",\"saveRecentSearchButtonTitle\":\"保存至搜索历史\",\"removeRecentSearchButtonTitle\":\"从搜索历史中移除\",\"favoriteSearchesTitle\":\"收藏\",\"removeFavoriteSearchButtonTitle\":\"从收藏中移除\"},\"errorScreen\":{\"titleText\":\"无法获取结果\",\"helpText\":\"你可能需要检查你的网络连接\"},\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\",\"searchByText\":\"搜索提供者\"},\"noResultsScreen\":{\"noResultsText\":\"无法找到相关结果\",\"suggestedQueryText\":\"你可以尝试查询\",\"reportMissingResultsText\":\"你认为该查询应该有结果？\",\"reportMissingResultsLinkText\":\"点击反馈\"}}}}}}},\"outline\":{\"level\":[2,4]},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"个人博客\",\"link\":\"https://www.ctbloge.top\"}],\"sidebar\":{\"/blog/Django/\":[{\"text\":\"安装部署\",\"collapsed\":false,\"items\":[]},{\"text\":\"定时任务\",\"collapsed\":false,\"items\":[{\"text\":\"Django使用Celery实现异步和定时任务功能\",\"link\":\"/blog/Django/django-celery\"},{\"text\":\"让定时任务支持执行自定义脚本\",\"link\":\"/blog/Django/task-for-script\"},{\"text\":\"把 Celery 定时任务变成实时触发的任务\",\"link\":\"/blog/Django/run-celery-task-now\"},{\"text\":\"使用 Python 的异步模块 asyncio 改造 I/O 密集型定时任务\",\"link\":\"/blog/Django/asyncio-task\"},{\"text\":\"Django博客网站可以用定时任务做些什么事？\",\"link\":\"/blog/Django/django-celery-tasks\"}]},{\"text\":\"可视化\",\"collapsed\":false,\"items\":[{\"text\":\"用 ECharts 做网站数据统计报表，告别第三方流量统计平台\",\"link\":\"/blog/Django/ECharts-for-web\"}]},{\"text\":\"灾备方案\",\"collapsed\":false,\"items\":[{\"text\":\"博客灾备方案（2）：博客文章同步到VitePress静态站\",\"link\":\"/blog/Django/blog-sync-to-vitepress\"}]},{\"text\":\"拓展\",\"collapsed\":false,\"items\":[{\"text\":\"Python-Markdown 自定义拓展\",\"link\":\"/blog/Django/python-markdown-extensions\"}]}],\"/blog/docker/\":[{\"text\":\"安装部署\",\"collapsed\":false,\"items\":[{\"text\":\"容器化部署博客（Django）—— 安装 docker 和 docker-compose\",\"link\":\"/blog/docker/install-docker\"},{\"text\":\"使用 Ansible 工具批量操作虚拟机集群，自动化安装 Docker\",\"link\":\"/blog/docker/ansible-and-docker\"}]},{\"text\":\"镜像操作\",\"collapsed\":false,\"items\":[{\"text\":\"分享一个给 Django 镜像瘦身 50% 的经验\",\"link\":\"/blog/docker/docker-image-for-django\"},{\"text\":\"Dockerfile 中的 multi-stage 特性，Vue 项目多阶段构建实战\",\"link\":\"/blog/docker/dockerfile-multi-stage\"}]}],\"/blog/free/\":[{\"text\":\"无分类文章\",\"collapsed\":false,\"items\":[]}],\"/blog/git/\":[{\"text\":\"Git操作\",\"collapsed\":false,\"items\":[{\"text\":\"Git 提交信息规范与最佳实践\",\"link\":\"/blog/git/git-commit\"},{\"text\":\"Git 常用及特殊命令笔记\",\"link\":\"/blog/git/git-note\"}]}],\"/blog/linux/\":[],\"/blog/nginx/\":[{\"text\":\"Nginx配置学习\",\"collapsed\":false,\"items\":[{\"text\":\"Nginx配置中server模块的加载顺序和规则\",\"link\":\"/blog/nginx/nginx-server\"},{\"text\":\"终于理解了Nginx配置中location规则的优先级问题\",\"link\":\"/blog/nginx/nginx-location\"}]}],\"/blog/personal-notes/\":[],\"/blog/python/\":[{\"text\":\"实战经验\",\"collapsed\":false,\"items\":[{\"text\":\"Python 虚拟环境 Virtualenv 分别在 Windows 和 Linux 上的安装和使用\",\"link\":\"/blog/python/virtualenv-for-python\"}]},{\"text\":\"自动化测试\",\"collapsed\":false,\"items\":[{\"text\":\"【Appium 自动化测试】搭建 Appium 环境踩坑记录\",\"link\":\"/blog/python/appium-env\"}]}],\"/blog/Redis/\":[{\"text\":\"安装部署\",\"collapsed\":false,\"items\":[{\"text\":\"Redis哨兵模式部署\",\"link\":\"/blog/Redis/redis-install-sentinel\"},{\"text\":\"Redis单机部署\",\"link\":\"/blog/Redis/redis-install\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ctbloge/ctbloge.github.io\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>